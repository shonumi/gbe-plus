Wantame Card Scanner Documentation 0.1
December 5th, 2025
Shonumi aka D.S. Baxter

***************************************************
1. Introduction
***************************************************  

On December 14, 2006, Capcom released an action role-playing game called Ryuusei no Rockman in Japan, later renamed Mega Man Star Force in other territories. It was something of a continuation of the Mega Man Battle Network series. Like the earlier Battle Network games, Capcom partnered with Takara Tomy to create an accessory known as the Wave Scanner. It was combination electronic LCD toy and video game peripheral. As a standalone unit, it let users fight viruses with swipeable cards and level up. When attached to the Nintendo DS, the player's level could be used in-game to boost their stats and power up Mega Man by granting an immediate Star Force transformation. During battle, users could swipe cards to enhance their attacks as well.

The peripheral shares some heritage with the Battle Chip Gates on the GBA. Additionally, it served as a template for the Wantame Card Scanner that Capcom and Takara released less than a year later.


***************************************************
2. General Hardware Information
***************************************************

* Features a small LCD screen to display limited graphics.
* Features a small rotating dial that can be pressed in 3 directions.
* Features a 2 face buttons.
* Uses DS microphone plug to transmit data.
* Microphone cable is tucked under the bottom of the unit.
* Uses a separate 3.5mm headphone jack for audio output (unrelated to DS connectivity).
* Uses Slot-2 only for stability. There is no ROM chip or PCB connected to the Slot-2 pins.
* Powered by 3 AAA batteries.
* Compatible with DSi models thanks to microphone cable.
* Uses 12 character barcodes in Code-128 C format.
* Came in 4 versions: Pegasus, Leo, Dragon, and DX (Pegasus).


***************************************************
3. Data Transmission Protocol
***************************************************

The Wave Scanner translates data into sound pulses via the DS microphone. By reading samples, the game grabs the barcode or level data as individual bits, verifies the integrity of the data, then checks to see if the data is valid for the current game mode. The transmission protocol is very basic and consists of the following 2 parts:

---------------------------------------------------------
Protocol Stage	| Description
---------------------------------------------------------
ACK Signal	| Initial pulses
Barcode/Level	| 32-bits
---------------------------------------------------------

The ACK signal alerts the game to incoming data. It consists of a single HIGH-to-LOW transition of microphone samples. At a minimum, each LOW and HIGH period should be sampled at least 9 times, but less than 16. The following psuedo-code can be used to determine whether a sample from the microphone is LOW or HIGH:

MIC_SAMPLE = READ_DS_MIC()
MIC_SAMPLE = MIC_SAMPLE * 2
MIC_SAMPLE = MIC_SAMPLE AND 0xFF

IF MIC_SAMPLE LESS THAN 0x58
	SAMPLE_TYPE = LOW

ELSE
	SAMPLE_TYPE = HIGH

After sending the ACK Signal, the Wave Scanner sends a continuous stream of 32 bits. Depending on the length of the HIGH part of the the HIGH-to-LOW transition, a "0" or a "1" will be recorded. If the HIGH portion measures at 6 or more samples, this represents a bit whose value is "1", otherwise it represents a bit whose value is "0". Importantly, each HIGH and LOW portion must measure at least 3 samples, and the total duration of the HIGH-to-LOW transition must not exceed 16 samples.

As both barcode data and level data are 32-bits long, the data type being transmitted is generally determined by the top 8 or 6 most significant bits (i.e. Bits 24-31 for level data, and Bits 26-31 for barcode data). Additionally, Ryuusei no Rockman will manually validate the data on its own. The format for each type of data is listed and explained below:

---------------------------------------------------------
Wave Scanner Level Data
---------------------------------------------------------
Bits 00 - 07	| XOR Check Digit
Bits 08 - 14	| Wave Scanner Level (1 - 99)
Bits 15 - 16	| Wave Scanner Type (1, 2, or 3)
Bits 17 - 23	| Constant (0x40)
Bits 24 - 31	| Constant (0x42)
---------------------------------------------------------

The Wave Scanner's level occupies Bits 8 - 14 and has a valid decimal integer range of 1 - 99.

The Wave Scanner Type (Leo, Pegasus, and Dragon) is determined by Bit 15 - 16. A value of "1" indicates a Leo Wave Scanner. A value of "2" represents a Pegasus Wave Scanner. A value of "3" represents a Dragon Wave Scanner.

The upper 15-bits are constant values, 0x42 and 0x40. That is to say, only Bits 23, 25, and 30 are set.

The XOR Check Digit ensures a small amount of data integrity during transmission. It is simply the XOR'd values of the upper 24-bits of data split into 8-bit values. In other words, the XOR Check Digit is calculated as follows:

CHECK DIGIT = (BITS 8 - 15) XOR (BITS 16 - 23) XOR (BITS 24 - 31)

---------------------------------------------------------
Wave Card Barcode Data
---------------------------------------------------------
Bits 00 - 07	| XOR Check Digit
Bits 08 - 13	| 6th Barcode Character Code
Bits 14 - 19	| 5th Barcode Character Code
Bits 20 - 25	| 4th Barcode Character Code
Bits 26 - 31	| Constant (0x10)
---------------------------------------------------------

Although the Wave Scanner's Wave Cards are in Code-128 C format, only use the last 3 character codes identify any specific card. The alphanumeric representation of each barcode for all Wave Cards uses the format 040000XXYYZZ, where only XXYYZZ change. As Code-128 C converts a single character code into 2 alphanumeric characters, XXYYZZ are the 4th, 5th, and 6th character codes of the barcode. These are encoded as individual 6-bit values when transmitted via the Wave Scanner. The upper 6-bits of the 32-bit barcode data is a simple constant value where only Bit 30 is set.


***************************************************
4. Barcodes
***************************************************

----------------------------------------------------------------------------------------------------------------------
Card ID	| Barcode	| English Name			| Japanese Name	
----------------------------------------------------------------------------------------------------------------------
S-001	| 040000060019	| Canon				| キャノン
S-006	| 040000060100	| Plasma Gun 3			| プラズマガン 3
S-008	| 040000060122	| Gatling 2			| ガトリンガ 2
S-011	| 040000060154	| Radar Missile 1		| レーダーミサイル 1
S-020	| 040000060317	| Stun Knuckle			| スタンナックル
S-024	| 040000060354	| Wide Sword			| ワイドソード
S-027	| 040000060421	| Tidal Edge			| スイゲツザン
S-028	| 040000060424	| Strike Edge			| ライメイザン
S-031	| 040000060460	| Ground Wave 1			| グランドウェーブ 1
S-042	| 040000060644	| Ghost Pulse 3			| ゴーストパルス 3
S-043	| 040000060655	| Fire Ring 1			| モエリング 1
S-044	| 040000060700	| Fire Ring 2			| モエリング 2
S-049	| 040000060745	| Fire Bazooka 1		| ファイアバズーカ 1
S-050	| 040000060752	| Fire Bazooka 2		| ファイアバズーカ 2
S-055	| 040000060838	| Wide Wave 1			| ワイドワェーブ 1
S-059	| 040000060918	| Chain Bubble 2		| チェインバブル 2
S-066	| 040000061028	| Sticky Rain 3			| ネバーレイン 3
S-067	| 040000061015	| Cloud Shot 1			| クラウドシュート 1
S-068	| 040000061048	| Cloud Shot 2			| クラウドシュート 2
S-070	| 040000061060	| Thunder Ball 1		| サンダーボール 1
S-073	| 040000061126	| Voltic Eye 1			| ボルティックアイ 1
S-079	| 040000061228	| Jumbo Hammer 1		| ジャンボハンマー 1
S-080	| 040000061232	| Jumbo Hammer 2		| ジャンボハンマー 2
S-083	| 040000061305	| Mop Lance 2			| モジャランス 2
S-088	| 040000061350	| Vulcan Seed 1			| バルカンシード 1
S-094	| 040000061452	| Junk Cube 1			| ジャンクキューブ 1
S-096	| 040000061500	| Junk Cube 3			| ジャンクキューブ 3
S-097	| 040000061518	| Sync Hook 1			| シンクロフック 1
S-107	| 040000061648	| Big Axe 2			| ビッグアックス 2
S-118	| 040000061832	| Green Burst			| グリーンバースト
S-128	| 040000062002	| Recover 30			| リカバリー 30
S-129	| 040000062010	| Recover 50			| リカバリー 50
S-130	| 040000062020	| Recover 80			| リカバリー 80
S-131	| 040000062033	| Recover 120			| リカバリー 120
S-135	| 040000062111	| Barrier			| バリア
S-138	| 040000062136	| Aura				| オーラ
S-142	| 040000062212	| Double Cross			| ウラギリノススメ
S-145	| 040000062242	| Ice Stage			| アイスステージ
S-147	| 040000062262	| Guard Null Stage		| ゼシエンステージ
M-185	| 040000062858	| Cygnus Wing EX		| キグナスウィング EX
M-187	| 040000062922	| Harp Note			| ハープ・ノート
M-189	| 040000062938	| Harp Note SP			| ハープ・ノート SP
M-194	| 040000063028	| Queen Ophiuca EX		| オヒュカスクイーン EX
M-196	| 040000063044	| Gemini Spark			| ジェミニスパーク
M-200	| 040000063116	| Cancer Bubble EX		| キャンサバブル EX
M-203	| 040000063155	| Wolf Woods EX			| ウルフフォレスト EX
M-210	| 040000063252	| Pegasus Magic SP		| ペガサスマジック SP
G-231	| 040000063613	| Pegasus Magic GX		| ペガサスマジック GX
G-234	| 040000063636	| Break Count Bomb		| ブレイクカウントボム
G-235	| 040000063651	| Dark Sword			| ダークソード
G-238	| 040000063714	| Gemini Thunder		| ジェミニサンダー
G-243	| 040000063801	| Gorgon Eye			| ゴルゴンアイ
G-247	| 040000063843	| Andromeda			| アンドロメダ
C-01	| 040000060031	| Rockman			| ロックマン
C-06	| 040000063236	| Ice Pegasus			| アイスペガサス
C-11	| 040000240032	| Harp Note			| ハープ・ノート
C-13	| 040000240056	| Queen Ophiuca			| オヒュカス・クイーン
C-15	| 040000240108	| Cancer Bubble			| キャンサ・バブル
C-16	| 040000240123	| Wolf Woods			| ウルフ・フォレスト
C-17	| 040000240136	| Crown Thunder			| クラウン・サンダー
BC-017	| 040000060246	| Ice Meteor 1			| アイスメテオ 1
----------------------------------------------------------------------------------------------------------------------
